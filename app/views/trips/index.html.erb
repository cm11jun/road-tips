<head>

<script src='https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css' rel='stylesheet' />





<div class= "container">
<br>
<div class="poi-icons row text-center mb-2">
  <div class="d-flex justify-content-between poi-icons-links">

    <figure>
    <i class="fa-solid fa-bridge-water fa-3x"></i>
    <figcaption>Scenic Roads</figcaption>
    </figure>

    <figure>
    <i class="fa-solid fa-flag-checkered fa-3x"></i>
    <figcaption>Fun Roads</figcaption>
    </figure>

    <figure>
    <i class="fa-solid fa-camera fa-3x"></i>
    <figcaption>Sights</figcaption>
    </figure>

    <figure>
    <i class="fa-brands fa-fort-awesome fa-3x"></i>
    <figcaption>Landmarks</figcaption>
    </figure>

    <figure>
    <i class="fa-solid fa-bed fa-3x"></i>
    <figcaption>Sleeps</figcaption>
    </figure>

    <figure>
    <i class="fa-solid fa-utensils fa-3x"></i>
    <figcaption>Eats</figcaption>
    </figure>

    <figure>
    <i class="fa-solid fa-gas-pump fa-3x"></i>
    <figcaption>Services</figcaption>
    </figure>
  </div>
</div>


<div class="main-container">
  <div class="col-12 col-lg-7">
    <div class="row">
          <% @trips.each do |trip| %>
            <div class="col-sm-6">
              <div class="card-trip flex mb-4">
              <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
              <div class="carousel-inner">
              <div class="carousel-item active">
              <div class="card-category d-block w-100" <% trip.photos.each do |photo| %>
              <%= cl_image_tag photo.key, height: 300, width: 400, crop: :fill, class: "card-category" %><% end %>>
              </div>
              <%# <div class="carousel-item">
                <img class="d-block w-100" src="..." alt="Second slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="..." alt="Third slide">
              </div> %>
              </div>
              <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
            </div>

            </div>

          <div class="container card-category-infos pt-1">
          <div class="text-end">
            <%= cl_image_tag trip.user.avatar.key, class: "card-trip-user avatar-bordered" %>
          </div>
            <h4><%= link_to trip.title, trip_path(trip), class: "card-category-h4 link-dark text-decoration-none" %> by <%= trip.user.username %></h4>
            <p><strong>From: </strong><%= trip.start_point %></p>
            <p><strong>To: </strong><%= trip.end_point %></p>
            <p><strong>Region: </strong> <%= trip.region %></p>
            <br>
            <i class="fas fa-heart"></i>
          </div>
          <div class="text-end mr-3">
          <div>
            <h2><%= trip.day %></h2>
          </div>
          <div class="pb-3">
            <% if trip.reviews.count > 0 %>
                <h4>â˜… <strong><%= trip.reviews.average(:rating).round(2) %> </strong></h4>
            <% else %>
              <h4>No reviews</h4>
            <% end %>
          </div>
          </div>
          </div>
  </div>

<% end %>

    </div>
  </div>


  <div id='map' style='width: 100vh; height: 100vh;' class="card-trip">
    <script>
      mapboxgl.accessToken = 'pk.eyJ1IjoiY20xMWp1biIsImEiOiJjbGVvbzZxb28wNDdmM3VvMTBqeXVub2trIn0.6YeYXqBNO0iFTo6kMuTM-w';
      var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v11'
      });
    </script>
  </div>
</div>
